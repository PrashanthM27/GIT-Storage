<apex:page StandardController="Opportunity" extensions="CustomPopupWindow"  sidebar="false">
    <script>
    function doSomething() {
        var accValue = document.getElementsByClassName("accId")[0].value;
        passparameter(accValue);
    }
    </script>
    <apex:form >
        <apex:actionFunction name="passparameter" action="{!AccountSelected}" reRender="act">
            <apex:param value="" name="accName" />
        </apex:actionFunction>
        <apex:outputPanel >
            <apex:pageMessages id="msgs"/>
            <apex:pageBlock title="Opportunity Detail Page">
                <apex:pageBlockButtons location="top">
                    <apex:commandButton action="/{!Opportunity.Id}" value="Back to Opportunity" style="padding:6px 14px;height:30px"/>
                </apex:pageBlockButtons>                
                <apex:pageBlockSection title="Opportunity With Product Name" columns="1">
                    <apex:pageBlockTable value="{!lstWrapper}" var="opps">
                        <apex:column headerValue="Opportunity Name">
                            <apex:outputText value="{!opps.opp.Name}"/>
                        </apex:column>
                        <apex:column headerValue="Product Name" >
                            <apex:selectList value="{!strSelectedValue}" size="1">
                                <apex:selectOptions value="{!opps.options}"></apex:selectOptions>
                            </apex:selectList>
                        </apex:column>
                        <apex:column headerValue="Account">
                            <apex:inputField value="{!opps.opp.LH__LH_Test_1__c}" id="aId" styleClass="accId">
                                <apex:actionSupport reRender="act" event="onchange" oncomplete="doSomething();"/>
                            </apex:inputField>
                        </apex:column> 
                    </apex:pageBlockTable> 
                    <apex:pageBlockSection title="Selected Account Details" collapsible="false" id="act">
                        <apex:outputField value="{!objAcc.Name}"/>       
                        <apex:outputField value="{!objAcc.Website}"/>
                        <apex:outputField value="{!objAcc.Phone}"/>
                    </apex:pageBlockSection>  
                </apex:pageBlockSection>
                <apex:pageBlockButtons location="bottom">
                    <apex:commandButton action="{!oppDataStore}" value="Save" style="padding:6px 14px;height:30px" />
                </apex:pageBlockButtons>                
                <apex:pageBlockSection columns="1" title="Saved Opportunity Details" collapsible="false" rendered="{!IF(lstOppData != null, true, false)}">
                    <apex:pageBlockTable value="{!lstShowData}" var="opData">
                        <apex:column headerValue="Opportunity Name" value="{!opData.oppData.Name}" />
                        <apex:column headerValue="Amount" value="{!opData.oppData.Amount__c}" />
                        <apex:column headerValue="Opportunity Product Name" value="{!opData.oppData.Product_Name__c}" />
                        <apex:column headerValue="Opportunity Account" value="{!opData.oppData.Account__c}" />
                        <apex:column headerValue="Date" value="{!opData.oppData.Date__c}"/>
                    </apex:pageBlockTable>
                </apex:pageBlockSection>
            </apex:pageBlock>
        </apex:outputPanel>
    </apex:form>
</apex:page>